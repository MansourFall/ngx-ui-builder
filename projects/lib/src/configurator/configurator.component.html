<div #offcanvas class="offcanvas offcanvas-end" tabindex="-1" id="offcanvas" *ngIf="{edited: (edited$ | async)} as _">
  <!-- HEADER -->
  <div class="offcanvas-header bg-light border-bottom">
    <h5 class="offcanvas-title" *ngIf="!_showTree && _.edited"><strong>{{_.edited.config.id}}</strong> (Type: <strong>{{_.edited.config.type}}</strong>)</h5>
    <h5 class="offcanvas-title" *ngIf="_showTree">Configuration Tree</h5>

    <button type="button" class="btn ms-auto" [ngClass]="_showTree? 'btn-secondary' : 'btn-light'" uib-tooltip="{{_showTree? 'Hide' : 'Show'}} configuration tree" (click)="showTree(!_showTree)">
      <svg-icon key="tree" width="22px" height="25px"></svg-icon>
    </button>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">

    <ng-container *ngIf="!_showTree && _.edited">
      <!-- CONFIGURATOR -->
    
      <ng-container
        *ngTemplateOutlet="configurators[_.edited.config.type]; context: { $implicit: _.edited }">
      </ng-container>
  
      <hr *ngIf="configurators[_.edited.config.type]"/>
  
      <details *ngIf="_.edited.config.type === 'container'" open>
        <summary>Layout</summary>
        <uib-flex-editor [config]="_.edited.config" (onChanges)="flexChanges(_.edited, $event)"></uib-flex-editor>
      </details>
  
      <uib-class-editor [config]="_.edited.config" *ngIf="cssClasses"></uib-class-editor>
  
      <details [attr.open]="_.edited.config.condition? '' : undefined" *ngIf="conditionalDisplay && _.edited.context.data">
        <summary uib-tooltip="Display this component only if the data validates a rule">Conditional display</summary>
        <uib-condition-editor [config]="_.edited.config"></uib-condition-editor>
      </details>
    </ng-container>
    
    <uib-tree [configuration]="configuration" *ngIf="_showTree"></uib-tree>
      
  </div>
</div>
